 <!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="stylesheet" href="css/leaflet.css" />
    <link rel="stylesheet" href="css/leaflet-control-boxzoom.css" />
    <link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/leaflet.fullscreen.css' rel='stylesheet' />
	<style type="text/css">
        <!-- enough styling to make a full-page map -->
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
        }
    </style>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="leaflet.js"></script>
	<script src="leaflet-dvf.js"></script>
	<script src="leaflet.dvf.experimental.js"></script>
    <script type='text/javascript' src="leaflet.restoreview.js"></script>
    <script src="leaflet-control-boxzoom.js"></script>
	<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v0.0.4/Leaflet.fullscreen.min.js'></script>
</head>
<body>
   <div id="map"></div>
   <script type="text/javascript"> 
	// test van jeroen
       var map = L.map('map');
		  L.tileLayer('https://{s}.tiles.mapbox.com/v4/thomhurks.lifnnoec/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidGhvbWh1cmtzIiwiYSI6ImtENDluRmsifQ.Q4w4kAlNk0YfaRclQp4BMA', {
		    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		    maxZoom: 18,
		    subdomains: ['a','b','c','d'],
		    mapId: 'thomhurks.lifnnoec',
		    token: 'pk.eyJ1IjoidGhvbWh1cmtzIiwiYSI6ImtENDluRmsifQ.Q4w4kAlNk0YfaRclQp4BMA',
		    fullscreenControl: true,
		    detectRetina: true,
		    reuseTiles: true,
		    bounds: null // SET THIS IN FUTURE!
		}).addTo(map);

        if (!map.restoreView()) {
            map.setView([42.31, -123.618], 5);
        }

		L.control.fullscreen().addTo(map);
        L.Control.boxzoom({ position:'topleft' }).addTo(map);

        var svg = d3.select(map.getPanes().overlayPane).append("svg"),
                g = svg.append("g").attr("class", "leaflet-zoom-hide");

        d3.json("data/paths.json", function(collection) {
            var transform = d3.geo.transform({point: projectPoint}),
                    path = d3.geo.path().projection(transform);

            var feature = g.selectAll("path")
                    .data(collection.features)
                    .enter().append("path")
                    .attr('stroke-width', function(d) { return d.properties.edgeweight; })
                    .style("stroke-width", function(d) { return d.properties.edgeweight; })
                    .style("stroke-linecap", "round")
                    .style("stroke", "steelblue")
                    .style("fill", "none");

            map.on("viewreset", reset);
            reset();

            // Reposition the SVG to cover the features.
            function reset(e) {
                if (e != undefined) {
                    console.log(e);
                }
                var bounds = path.bounds(collection),
                    topLeft = bounds[0],
                    bottomRight = bounds[1];
                // Add offset because D3 is silly.
                topLeft[0] -= 25;
                topLeft[1] -= 25;
                bottomRight[0] += 25;
                bottomRight[1] += 25;

                svg.attr("width", bottomRight[0] - topLeft[0])
                    .attr("height", bottomRight[1] - topLeft[1])
                    .style("left", topLeft[0] + "px")
                    .style("top", topLeft[1] + "px");

                g.attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");

                feature.attr("d", path);
            }

            // Use Leaflet to implement a D3 geometric transformation.
            function projectPoint(x, y) {
                var point = map.latLngToLayerPoint(new L.LatLng(y, x));
                this.stream.point(point.x, point.y);
            }
        });

		var marker = L.marker([51.5, -0.09]).addTo(map);
		var circle = L.circle([51.508, -0.11], 500, {
		    color: 'red',
		    fillColor: '#f03',
		    fillOpacity: 0.5
		}).addTo(map);
		var polygon = L.polygon([
		    [51.509, -0.08],
		    [51.503, -0.06],
		    [51.51, -0.047]
		]).addTo(map);
	</script>
</body>
</html>

